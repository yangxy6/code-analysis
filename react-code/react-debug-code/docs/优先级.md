# lane
Reactä¼˜å…ˆçº§laneï¼ˆè½¦é“ï¼‰

æ–‡ä»¶ï¼šReactFiberLane.old

> laneä¸ºä¼˜å…ˆçº§ï¼Œlaneå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œlaneä¸ºäºŒè¿›åˆ¶ï¼Œä¸€å…±31ä½ï¼Œæ¯ä½æ˜¯ä¸€ä¸ªè½¦é“ã€‚ï¼ˆåŒèµ›è½¦ğŸï¸ï¼Œè½¦é“è¶Šé è¿‘é‡Œé¢ä¼˜åŠ¿è¶Šå¤§ï¼‰
```js
export const TotalLanes = 31;

export const NoLanes: Lanes = /*                        */ 0b0000000000000000000000000000000;
export const NoLane: Lane = /*                          */ 0b0000000000000000000000000000000;

export const SyncLane: Lane = /*     åŒæ­¥è½¦é“ï¼š1          */ 0b0000000000000000000000000000001;

export const InputContinuousHydrationLane: Lane = /*    */ 0b0000000000000000000000000000010;
export const InputContinuousLane: Lanes = /*            */ 0b0000000000000000000000000000100;

export const DefaultHydrationLane: Lane = /*            */ 0b0000000000000000000000000001000;
export const DefaultLane: Lanes = /*   é»˜è®¤è§¦å‘æ›´æ–°è½¦é“    */ 0b0000000000000000000000000010000;

const TransitionHydrationLane: Lane = /*                */ 0b0000000000000000000000000100000;
const TransitionLanes: Lanes = /*   æ‰¹è½¦é“               */ 0b0000000001111111111111111000000;
const TransitionLane1: Lane = /*                        */ 0b0000000000000000000000001000000;
const TransitionLane2: Lane = /*                        */ 0b0000000000000000000000010000000;
const TransitionLane3: Lane = /*                        */ 0b0000000000000000000000100000000;
const TransitionLane4: Lane = /*                        */ 0b0000000000000000000001000000000;
const TransitionLane5: Lane = /*                        */ 0b0000000000000000000010000000000;
const TransitionLane6: Lane = /*                        */ 0b0000000000000000000100000000000;
const TransitionLane7: Lane = /*                        */ 0b0000000000000000001000000000000;
const TransitionLane8: Lane = /*                        */ 0b0000000000000000010000000000000;
const TransitionLane9: Lane = /*                        */ 0b0000000000000000100000000000000;
const TransitionLane10: Lane = /*                       */ 0b0000000000000001000000000000000;
const TransitionLane11: Lane = /*                       */ 0b0000000000000010000000000000000;
const TransitionLane12: Lane = /*                       */ 0b0000000000000100000000000000000;
const TransitionLane13: Lane = /*                       */ 0b0000000000001000000000000000000;
const TransitionLane14: Lane = /*                       */ 0b0000000000010000000000000000000;
const TransitionLane15: Lane = /*                       */ 0b0000000000100000000000000000000;
const TransitionLane16: Lane = /*                       */ 0b0000000001000000000000000000000;

const RetryLanes: Lanes = /*            æ‰¹è½¦é“           */ 0b0000111110000000000000000000000;
const RetryLane1: Lane = /*                             */ 0b0000000010000000000000000000000;
const RetryLane2: Lane = /*                             */ 0b0000000100000000000000000000000;
const RetryLane3: Lane = /*                             */ 0b0000001000000000000000000000000;
const RetryLane4: Lane = /*                             */ 0b0000010000000000000000000000000;
const RetryLane5: Lane = /*                             */ 0b0000100000000000000000000000000;
```

# ä½è¿ç®—
1.ä¸è¿ç®—

`a & b	å¯¹äºæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œåªæœ‰ä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„æ¯”ç‰¹ä½éƒ½æ˜¯1æ—¶ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚`

2.æˆ–è¿ç®—

`a | b	å¯¹äºæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œå½“ä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„æ¯”ç‰¹ä½è‡³å°‘æœ‰ä¸€ä¸ª1æ—¶ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚`

3.éè¿ç®—

`åè½¬æ“ä½œæ•°çš„æ¯”ç‰¹ä½ï¼Œå³0å˜æˆ1ï¼Œ1å˜æˆ0ã€‚`

# React lane è¿ç®—
ç›®å‰åœ¨æºç ä¸­çœ‹åˆ°å‡ ç§ï¼Œå¾…åç»­æºç ä¸­å®é™…ä½¿ç”¨åœ¨çœ‹
```js
// æ˜¯å¦å­˜åœ¨äº¤é›† è½¦é“å’Œæ‰¹è½¦é“
export function includesSomeLane(a: Lanes | Lane, b: Lanes | Lane) {
  return (a & b) !== NoLanes;
}
// subsetæ˜¯å¦æ˜¯setå­é›† è½¦é“å’Œæ‰¹è½¦é“
export function isSubsetOfLanes(set: Lanes, subset: Lanes | Lane) {
  return (set & subset) === subset;
}
// åˆå¹¶è½¦é“
export function mergeLanes(a: Lanes | Lane, b: Lanes | Lane): Lanes {
  return a | b;
}
// ç§»é™¤è½¦é“ ä»setçš„lanesä¸­ç§»é™¤ lane
export function removeLanes(set: Lanes, subset: Lanes | Lane): Lanes {
  return set & ~subset;
}
// æ–°å¢è½¦é“ 
export function intersectLanes(a: Lanes | Lane, b: Lanes | Lane): Lanes {
  return a & b;
}
```
